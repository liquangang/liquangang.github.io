---
title: 对象拷贝
date: 2022-03-25 16:28:18
tags: Q&A
categories:
- [Q&A, Q&A-java]
---

### 为什么要使用克隆？
* 想对一个对象进行处理，但是又想保留原有数据进行其他操作，此时需要对原有数据进行克隆

### 如何实现对象克隆？
* 克隆：
  * 浅克隆：只克隆对象里面的基本数据类型
  * 深克隆：克隆对象里面的所有属性
* 实现：浅克隆只需要本类实现Cloneable接口（该接口有个clone方法，需要调用super.clone实现）即可，深克隆需要对象所属的类以及对象引用的所有对象对应的类都实现Cloneable接口
* 深拷贝代码示例：
```
class Address  {
    private String add;
    public String getAdd() {
        return add;
    }

    public void setAdd(String add) {
        this.add = add;
    }

}

class Student implements Cloneable {
    private int number;

    private Address addr;

    public Address getAddr() {
        return addr;
    }

    public void setAddr(Address addr) {
        this.addr = addr;
    }

    public int getNumber() {
        return number;
    }

    public void setNumber(int number) {
        this.number = number;
    }

    @Override
    public Object clone() {
        Student stu = null;
        try{
            stu = (Student)super.clone();
        }catch(CloneNotSupportedException e) {
            e.printStackTrace();
        }
        return stu;
    }
}

@Test
public void testCopy() {
    Address addr = new Address();
    addr.setAdd("杭州市");
    Student stu1 = new Student();
    stu1.setNumber(123);
    stu1.setAddr(addr);

    Student stu2 = (Student)stu1.clone();

    System.out.println("学生1:" + stu1.getNumber() + ",地址:" + stu1.getAddr().getAdd());
    System.out.println("学生2:" + stu2.getNumber() + ",地址:" + stu2.getAddr().getAdd());
}
```

### 深拷贝和浅拷贝区别是什么？
* 浅拷贝只支持基本数据类型的拷贝，深拷贝全都支持，所以浅拷贝之后的引用类型还是同一个地址

### 如何解决多层克隆问题？
* 先序列化，在反序列化
