---
title: MySql
date: 2022-05-11 12:06:44
tags: Q&A
categories:
- [Q&A, Q&A-java]
---

## 数据库的三范式是什么？
|范式|简介|
|---|---|
|第一范式|强调表的每一列的原子性，即数据库表的每一列都是不可分割的原子数据项|
|第二范式|要求实体的属性完全依赖主关键字，不能存在只依赖主关键字一部分的属性|
|第三范式|任何非主属性不依赖其他非主属性|

## 一张自增表里面总共有 7 条数据，删除了最后 2 条数据，重启 mysql 数据库，又插入了一条数据，此时 id 是几？
1、如果设置表类型为MyISAM，id就是8，该类型下，mysql会在数据文件中持久化主键最大id，所以重启之后最大主键依然是7
2、如果设置表类型为InnoDB，id就是6，该类型下，mysql只在内存中保存主键最大id，重启会丢失，重启之后从表中重新加载到内存当中的最大主键是5
3、如果删除的是中间的数据，那么id是相同的，都是8

## 如何获取当前数据库版本？
select version()

## 说一下 ACID 是什么？
#### 即数据库写表过程中，为保证事务正确可靠，确立的四个特性
|特性|简介|
|---|---|
|Atomicity（原子性）|一个事务的所有操作要么全部完成，要么全部不完成，即恢复到事务执行前的样子，即事务不可分割、不可约简|
|Consistency（一致性）|事务执行过程中，数据库完整性不会被破坏，即写入的数据必须符合预设约束、触发器、级联回滚等|
|Isolation（事务隔离）|数据库允许多个事务同时进行读写，隔离性是为了保证并发执行时数据一致。事务隔离分为不同级别：读未提交（Read uncommitted）、读提交（Read committed）、可重复读（Repeatable read）、串行化（Serializable）|
|Durability（持久性）|事务执行成功后对数据的修改是永远生效的，即便系统异常也不会丢失|

## char 和 varchar 的区别是什么？
||char(n)：固定长度字符类型，占用部分或者全部空间，剩余空间使用空字节占用，即总长度固定|varchar(n)：可变长度字符类型，即数据会占用与自身长度相同的空间，再加上一个表示该数据长度的字节，这两部分即整体的长度|
|---|---|---|
|效率|高|低|
|占用空间|高|低|
|使用场景|存储固定长度|存储可变长度的|

## float 和 double 的区别是什么？
||float|double|
|---|---|---|
|存储十进制数长度|8位|16位|
|内存占用|4字节|8字节|

## mysql 的内连接、左连接、右连接有什么区别？
||内连接|左连接|右连接|
|---|---|---|---|
|关键字|inner join|left join|right join|
|作用|把匹配的关联数据全部查出来|左边的表全部查出来，右边的表查出来符合条件的数据|右边的表全部查出来，左边的表查出来符合条件的数据|

## mysql 索引是怎么实现的？
### 索引简介
满足某种特定查找算法的数据结构，这些数据结构会以某种方式指向数据，以实现高效查询

### 实现原理
目前主流的数据库引擎都采用B+树实现，性能与二分法类似

## 怎么验证 mysql 的索引是否满足需求？
### 原理
使用explain查看sql是如何执行查询语句的，从而分析索引是否满足需求

### explain语句示例
explain select * from table where type=1;
