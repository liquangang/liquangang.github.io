---
title: Zookeeper
date: 2022-05-10 18:07:28
tags: Q&A
categories:
- [Q&A, Q&A-java]
---

## zookeeper是什么
一个分布式、开源的分布式应用程序协调服务，具有配置维护、域名服务、分布式同步、组服务等

## zookeeper有哪些功能
|功能|简介|
|----|----|
|集群管理|监控节点状态、运行请求等|
|主节点选举|主节点挂掉之后会执行新主选举|
|分布式锁|zookeeper提供两种锁：独占锁、共享锁，独占锁一个线程完全占有资源，共享锁读写互斥，读可多线程，写单线程独享|
|命名服务|给节点起名字，其他节点可以通过节点名称对其进行访问|

## zookeeper有几种部署方式
1、单机部署
2、集群部署
3、伪集群部署：一台机器上启动多个zookeeper实例

## zookeeper如何保证主从节点同步状态
依靠原子广播机制，该机制依赖zab协议，zab协议包含两种模式：恢复模式、广播模式，恢复模式在服务启动与领导者崩溃时使用，广播模式在服务都正常时使用

## 急群众为什么要有主节点
部分业务仅需要一个服务节点执行即可，其他节点共享该结果即可，这样可以减少计算资源浪费，提升计算资源效率

## 集群中有三个服务器节点，有一个节点宕机，zookeeper还可以继续使用吗
可以接续使用，单数数量的服务节点在少于一半节点宕机的情况下可以继续使用

## 说一下zookeeper的通知机制
客户端可以在节点上设置watcher，当节点有变化时，zookeeper就会通知客户端
