---
title: Redis
date: 2022-05-13 16:40:28
tags: Q&A
categories:
- [Q&A, Q&A-java]
---

## Redis是什么？有哪些使用场景
### Redis简介
是一个数据库
是一个开源的数据库
是一个使用标准C语言编写的数据库
是一个使用标准C语言编写的key-value型数据库
是一个支持网络、可基于内存、可持久化、提供多种语言API的使用标准c语言编写的key-value型数据库

### Redis使用场景
1、数据库高并发读写
2、海量数据读写
3、对拓展性要求高的数据

## Redis有哪些功能？
1、数据缓存
2、分布式锁
3、数据持久化
4、事务
5、消息队列

## Redis和memecache有什么区别？
||Redis|Memecache|
|---|---|---|
|支持数据类型|支持多种|只支持简单的字符串|
|速度|快|慢|
|持久化|可以|不行|

## Redis为什么是单线程？
redis侧重于数据的读写，不侧重数据处理，所以更加依赖内存、硬盘、网络带宽，redis采用单线程方案能实现每秒几十万的并发，所以就采用了单线程方案

## 什么是缓存穿透？怎么解决？
### 缓存穿透
redis中没有数据A，数据库中也没有数据A，所以在redis中查询数据A时，由于找不到就会到数据库中查询，数据库中也没有，所以每次都会穿透redis去数据库查询，该现象即缓存穿透

### 解决
将数据库中的空结果也进行缓存，且设置该空结果的过期时间设置的短一些

## Redis支持的数据类型有哪些?
* string
* list
* hash
* set
* zset

## Redis支持的java客户端有哪些
* Redisson（官方推荐）
* Jedis
* lettuce

## Jedis和Redisson区别
||Jedis|Redisson|
|---|---|---|
|特点|功能全面|功能简单，实现了分布式和可拓展特性，设计目的是使redis的使用与业务逻辑进行分离，使使用者更关注在业务逻辑的处理|
|功能丰富度|全面的Redis命令支持|功能较为简单，不支持字符串操作，不支持排序、事务、管道、分区|

## 怎么保证缓存和数据库数据的一致性？
1、合理设置缓存过期时间
2、写库操作要同步更新缓存，可使用事务来保证二者数据一致性

## Redis持久化方式？
|持久化方式|简介|
|---|---|
|RDB（Redis Database）|指定的时间间隔内对数据进行快照存储|
|AOP（Append Only File）|每一个写操作都通过write函数写入到文件|

## Redis怎么实现分布式锁？
使用setnx(set if not exists)指令占有锁，只允许被一个程序占有锁，使用完之后调用del释放锁

## Redis分布式锁有什么缺陷？
Redis锁不能解决超时问题，分布式锁有一个超时时间，在超时时间内，程序未完成处理的化，就会出问题

## Redis如何做内存优化？
尽量使用散列表（hash），散列表使用的内存少

## Redis淘汰策略？
|策略|简介|
|---|---|
|volatile-lru|从已设置过期时间的数据集中挑选最近最少使用的数据淘汰|
|volatile-ttl|从已设置过期时间的数据集中挑选将要过期的数据淘汰|
|volatile-random|从已设置过期时间的数据集中挑选任意数据淘汰|
|allkeys-lru|从数据集中挑选最近最少使用的数据淘汰|
|allkeys-random|从数据集中挑选任意数据集淘汰|
|no-enviction|禁止淘汰（驱逐）数据|

## Redis常见的性能问题有哪些？该如何解决?
|性能问题|解决方案|
|---|---|
|主服务器写大内存快照，会阻塞Redis主线程工作，出现间断性暂停服务|主服务器最好不要写内存快照|
|主从复制性能问题|为了主从复制的速度和稳定性，主从节点最好在同一个局域网内|
